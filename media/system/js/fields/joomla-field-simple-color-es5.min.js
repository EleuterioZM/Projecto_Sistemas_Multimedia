(function(){"use strict";function w(e,n){for(var f=0;f<n.length;f++){var r=n[f];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function E(e,n,f){return n&&w(e.prototype,n),f&&w(e,f),Object.defineProperty(e,"prototype",{writable:!1}),e}function x(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,h(e,n)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},y(e)}function h(e,n){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,l){return r.__proto__=l,r},h(e,n)}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(e,n,f){return S()?m=Reflect.construct.bind():m=function(l,b,c){var i=[null];i.push.apply(i,b);var t=Function.bind.apply(l,i),o=new t;return c&&h(o,c.prototype),o},m.apply(null,arguments)}function A(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function v(e){var n=typeof Map=="function"?new Map:void 0;return v=function(r){if(r===null||!A(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(r))return n.get(r);n.set(r,l)}function l(){return m(r,arguments,y(this).constructor)}return l.prototype=Object.create(r.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),h(l,r)},v(e)}function _(e,n){if(typeof e!="object"||e===null)return e;var f=e[Symbol.toPrimitive];if(f!==void 0){var r=f.call(e,n||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function O(e){var n=_(e,"string");return typeof n=="symbol"?n:String(n)}(function(e){var n={TAB:9,ESC:27},f={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},r=function(l){x(b,l);function b(){var i;return i=l.call(this)||this,i.select="",i.options=[],i.icon="",i.panel="",i.buttons=[],i.focusableElements=null,i.focusableSelectors=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],i}var c=b.prototype;return c.connectedCallback=function(){var t=this;if(this.select=this.querySelector("select"),!this.select)throw new Error("Simple color field requires a select element");this.options=[].slice.call(this.select.querySelectorAll("option")),this.select.classList.add("hidden"),this.options.forEach(function(d){var p=d.value,k="swatch";p==="none"&&(k+=" nocolor",p="transparent"),d.selected&&(k+=" active");var g=document.createElement("button");g.setAttribute("class",k),g.style.backgroundColor=p,g.setAttribute("type","button");var L=p==="transparent"?t.textTransp:t.getColorName(p);g.innerHTML=Joomla.sanitizeHtml('<span class="visually-hidden">'+L+"</span>"),t.buttons.push(g)});var o=document.createElement("button");o.setAttribute("class","btn-close"),o.setAttribute("type","button"),o.setAttribute("aria-label",this.textClose),this.buttons.push(o);var a=this.select.value,u="";a==="none"&&(u+=" nocolor",a="transparent"),this.icon=document.createElement("button"),u&&this.icon.setAttribute("class",u);var s="simple-color-"+Math.random().toString(36).substr(2,10);this.icon.setAttribute("type","button"),this.icon.setAttribute("tabindex","0"),this.icon.style.backgroundColor=a,this.icon.innerHTML=Joomla.sanitizeHtml('<span class="visually-hidden">'+this.textSelect+"</span>"),this.icon.id=s,this.select.insertAdjacentElement("beforebegin",this.icon),this.icon.addEventListener("click",this.show.bind(this)),this.panel=document.createElement("div"),this.panel.classList.add("simplecolors-panel"),this.panel.setAttribute("aria-labelledby",s),this.hide=this.hide.bind(this),this.colorSelect=this.colorSelect.bind(this),this.buttons.forEach(function(d){d.classList.contains("btn-close")?d.addEventListener("click",t.hide):d.addEventListener("click",t.colorSelect),t.panel.insertAdjacentElement("beforeend",d)}),this.appendChild(this.panel),this.focusableElements=[].slice.call(this.panel.querySelectorAll(this.focusableSelectors.join())),this.keys=this.keys.bind(this),this.hide=this.hide.bind(this),this.mousedown=this.mousedown.bind(this)},c.show=function(){document.addEventListener("mousedown",this.hide),this.addEventListener("keydown",this.keys),this.panel.addEventListener("mousedown",this.mousedown),this.panel.setAttribute("data-open","");var t=this.panel.querySelector("button");t&&t.focus()},c.hide=function(){document.removeEventListener("mousedown",this.hide,!1),this.removeEventListener("keydown",this.keys),this.panel.hasAttribute("data-open")&&this.panel.removeAttribute("data-open"),this.icon.focus()},c.colorSelect=function(t){var o="",a="",u="";t.target.classList.contains("nocolor")?(o="none",a="transparent",u="nocolor"):(o=this.rgb2hex(t.target.style.backgroundColor),a=o),this.buttons.forEach(function(s){s.classList.contains("active")&&s.classList.remove("active")}),t.target.classList.add("active"),this.icon.classList.remove("nocolor"),this.icon.setAttribute("class",u),this.icon.style.backgroundColor=a,this.select.dispatchEvent(new Event("change")),this.dispatchEvent(new CustomEvent("change",{detail:{value:o},bubbles:!0})),this.hide(),this.options.forEach(function(s){s.selected&&s.removeAttribute("selected"),s.value===a&&s.setAttribute("selected","")})},c.keys=function(t){if(t.keyCode===n.ESC&&this.hide(),t.keyCode===n.TAB){var o=this.focusableElements.indexOf(document.activeElement);t.shiftKey&&(o===0||o===-1)&&(this.focusableElements[this.focusableElements.length-1].focus(),t.preventDefault()),!t.shiftKey&&o===this.focusableElements.length-1&&(this.focusableElements[0].focus(),t.preventDefault())}},c.mousedown=function(t){t.stopPropagation(),t.preventDefault()},c.getColorName=function(t){var o=t;if(t.length===4){var a=t.split("");o=a[0]+a[1]+a[1]+a[2]+a[2]+a[3]+a[3]}for(var u in f)if(f.hasOwnProperty(u)&&o.toLowerCase()===f[u])return u;return this.textColor+" "+t.replace("#","").split("").join(", ")},c.rgb2hex=function(t){var o=function(s){return("0"+parseInt(s,10).toString(16)).slice(-2)},a=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+o(a[1])+o(a[2])+o(a[3])},E(b,[{key:"textSelect",get:function(){return this.getAttribute("text-select")}},{key:"textColor",get:function(){return this.getAttribute("text-color")}},{key:"textClose",get:function(){return this.getAttribute("text-close")}},{key:"textTransp",get:function(){return this.getAttribute("text-transparent")}}],[{key:"observedAttributes",get:function(){return["text-select","text-color","text-close","text-transparent"]}}]),b}(v(HTMLElement));e.define("joomla-field-simple-color",r)})(customElements)})();
