(function(){"use strict";/**
 * @copyright   (C) 2018 Open Source Matters, Inc. <https://www.joomla.org>
 * @license     GNU General Public License version 2 or later; see LICENSE.txt
 */var k=function(){function s(c){var t=this;this.tableEl=c,this.formEl=c.closest("form"),this.rowSelector='tr[class^="row"]',this.boxSelector='input[type="checkbox"][name="cid[]"]',this.checkallToggle=this.tableEl.querySelector('[name="checkall-toggle"]'),this.prevRow=null,this.tableEl.addEventListener("click",function(o){o.target.closest(t.rowSelector)&&t.onRowClick(o)}),this.checkallToggle&&this.checkallToggle.addEventListener("click",function(o){var e=o.target,u=e.checked;t.getRows().forEach(function(l){t.changeBg(l,u)})})}var a=s.prototype;return a.getRows=function(){return Array.from(this.tableEl.querySelectorAll(this.rowSelector))},a.changeBg=function(t,o){t.classList.toggle("row-selected",o)},a.onRowClick=function(t){var o=this,e=t.target,u=t.shiftKey;if(!(e.tagName&&(e.tagName==="A"||e.tagName==="BUTTON"||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.tagName==="INPUT"&&!e.matches(this.boxSelector)))){var l=e.closest(this.rowSelector),i=e.matches(this.boxSelector)?e:l.querySelector(this.boxSelector);if(i){var r=i!==e?!i.checked:i.checked;if(r!==i.checked&&(i.checked=r,Joomla.isChecked(r,this.formEl)),this.changeBg(l,r),u&&this.prevRow){document.getSelection().removeAllRanges();var g=this.getRows(),n=g.indexOf(this.prevRow),h=g.indexOf(l);if(n>=0&&h>=0&&Math.abs(n-h)>1){var d=n<h?g.slice(n,h+1):g.slice(h,n+1);d.forEach(function(f){if(f!==l){var v=f.querySelector(o.boxSelector);v&&v.checked!==r&&(v.checked=r,o.changeBg(f,r),Joomla.isChecked(r,o.formEl))}})}}this.prevRow=l}}},s}(),m=function(a){var c="#adminForm",t=window.Joomla?Joomla.getOptions("js-multiselect",{}).formName:"";if(t){var o=t[0];c=o!=="."&&o!=="#"?"#"+t:t}a.querySelectorAll(c).forEach(function(e){e&&!("multiselect"in e.dataset)&&(e.dataset.multiselect="",new k(e))})};m(document),document.addEventListener("joomla:updated",function(s){var a=s.target;return m(a)})})();
