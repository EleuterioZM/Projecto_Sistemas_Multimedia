(function(i){typeof exports=="object"&&typeof module=="object"?i(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)})(function(i){"use strict";var s="CodeMirror-activeline",f="CodeMirror-activeline-background",l="CodeMirror-activeline-gutter";i.defineOption("styleActiveLine",!1,function(e,n,t){var r=t==i.Init?!1:t;n!=r&&(r&&(e.off("beforeSelectionChange",d),v(e),delete e.state.activeLines),n&&(e.state.activeLines=[],u(e,e.listSelections()),e.on("beforeSelectionChange",d)))});function v(e){for(var n=0;n<e.state.activeLines.length;n++)e.removeLineClass(e.state.activeLines[n],"wrap",s),e.removeLineClass(e.state.activeLines[n],"background",f),e.removeLineClass(e.state.activeLines[n],"gutter",l)}function C(e,n){if(e.length!=n.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!=n[t])return!1;return!0}function u(e,n){for(var t=[],r=0;r<n.length;r++){var o=n[r],L=e.getOption("styleActiveLine");if(!(typeof L=="object"&&L.nonEmpty?o.anchor.line!=o.head.line:!o.empty())){var c=e.getLineHandleVisualStart(o.head.line);t[t.length-1]!=c&&t.push(c)}}C(e.state.activeLines,t)||e.operation(function(){v(e);for(var a=0;a<t.length;a++)e.addLineClass(t[a],"wrap",s),e.addLineClass(t[a],"background",f),e.addLineClass(t[a],"gutter",l);e.state.activeLines=t})}function d(e,n){u(e,n.ranges)}});
