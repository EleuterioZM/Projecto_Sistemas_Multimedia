(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.defineOption("selectionPointer",!1,function(e,t){var o=e.state.selectionPointer;o&&(n.off(e.getWrapperElement(),"mousemove",o.mousemove),n.off(e.getWrapperElement(),"mouseout",o.mouseout),n.off(window,"scroll",o.windowScroll),e.off("cursorActivity",s),e.off("scroll",s),e.state.selectionPointer=null,e.display.lineDiv.style.cursor=""),t&&(o=e.state.selectionPointer={value:typeof t=="string"?t:"default",mousemove:function(i){a(e,i)},mouseout:function(i){c(e,i)},windowScroll:function(){s(e)},rects:null,mouseX:null,mouseY:null,willUpdate:!1},n.on(e.getWrapperElement(),"mousemove",o.mousemove),n.on(e.getWrapperElement(),"mouseout",o.mouseout),n.on(window,"scroll",o.windowScroll),e.on("cursorActivity",s),e.on("scroll",s))});function a(e,t){var o=e.state.selectionPointer;(t.buttons==null?t.which:t.buttons)?o.mouseX=o.mouseY=null:(o.mouseX=t.clientX,o.mouseY=t.clientY),u(e)}function c(e,t){if(!e.getWrapperElement().contains(t.relatedTarget)){var o=e.state.selectionPointer;o.mouseX=o.mouseY=null,u(e)}}function s(e){e.state.selectionPointer.rects=null,u(e)}function u(e){e.state.selectionPointer.willUpdate||(e.state.selectionPointer.willUpdate=!0,setTimeout(function(){p(e),e.state.selectionPointer.willUpdate=!1},50))}function p(e){var t=e.state.selectionPointer;if(t){if(t.rects==null&&t.mouseX!=null&&(t.rects=[],e.somethingSelected()))for(var o=e.display.selectionDiv.firstChild;o;o=o.nextSibling)t.rects.push(o.getBoundingClientRect());var i=!1;if(t.mouseX!=null)for(var r=0;r<t.rects.length;r++){var l=t.rects[r];l.left<=t.mouseX&&l.right>=t.mouseX&&l.top<=t.mouseY&&l.bottom>=t.mouseY&&(i=!0)}var f=i?t.value:"";e.display.lineDiv.style.cursor!=f&&(e.display.lineDiv.style.cursor=f)}}});
