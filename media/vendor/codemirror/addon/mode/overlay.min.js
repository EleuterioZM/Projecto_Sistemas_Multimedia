(function(o){typeof exports=="object"&&typeof module=="object"?o(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],o):o(CodeMirror)})(function(o){"use strict";o.overlayMode=function(r,u,i){return{startState:function(){return{base:o.startState(r),overlay:o.startState(u),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(e){return{base:o.copyState(r,e.base),overlay:o.copyState(u,e.overlay),basePos:e.basePos,baseCur:null,overlayPos:e.overlayPos,overlayCur:null}},token:function(e,n){return(e!=n.streamSeen||Math.min(n.basePos,n.overlayPos)<e.start)&&(n.streamSeen=e,n.basePos=n.overlayPos=e.start),e.start==n.basePos&&(n.baseCur=r.token(e,n.base),n.basePos=e.pos),e.start==n.overlayPos&&(e.pos=e.start,n.overlayCur=u.token(e,n.overlay),n.overlayPos=e.pos),e.pos=Math.min(n.basePos,n.overlayPos),n.overlayCur==null?n.baseCur:n.baseCur!=null&&n.overlay.combineTokens||i&&n.overlay.combineTokens==null?n.baseCur+" "+n.overlayCur:n.overlayCur},indent:r.indent&&function(e,n,l){return r.indent(e.base,n,l)},electricChars:r.electricChars,innerMode:function(e){return{state:e.base,mode:r}},blankLine:function(e){var n,l;return r.blankLine&&(n=r.blankLine(e.base)),u.blankLine&&(l=u.blankLine(e.overlay)),l==null?n:i&&n!=null?n+" "+l:l}}}});
