(function(i){typeof exports=="object"&&typeof module=="object"?i(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)})(function(i){i.defineOption("placeholder","",function(e,t,o){var s=o&&o!=i.Init;if(t&&!s)e.on("blur",a),e.on("change",n),e.on("swapDoc",n),i.on(e.getInputField(),"compositionupdate",e.state.placeholderCompose=function(){d(e)}),n(e);else if(!t&&s){e.off("blur",a),e.off("change",n),e.off("swapDoc",n),i.off(e.getInputField(),"compositionupdate",e.state.placeholderCompose),l(e);var f=e.getWrapperElement();f.className=f.className.replace(" CodeMirror-empty","")}t&&!e.hasFocus()&&a(e)});function l(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function r(e){l(e);var t=e.state.placeholder=document.createElement("pre");t.style.cssText="height: 0; overflow: visible",t.style.direction=e.getOption("direction"),t.className="CodeMirror-placeholder CodeMirror-line-like";var o=e.getOption("placeholder");typeof o=="string"&&(o=document.createTextNode(o)),t.appendChild(o),e.display.lineSpace.insertBefore(t,e.display.lineSpace.firstChild)}function d(e){setTimeout(function(){var t=!1;if(e.lineCount()==1){var o=e.getInputField();t=o.nodeName=="TEXTAREA"?!e.getLine(0).length:!/[^\u200b]/.test(o.querySelector(".CodeMirror-line").textContent)}t?r(e):l(e)},20)}function a(e){p(e)&&r(e)}function n(e){var t=e.getWrapperElement(),o=p(e);t.className=t.className.replace(" CodeMirror-empty","")+(o?" CodeMirror-empty":""),o?r(e):l(e)}function p(e){return e.lineCount()===1&&e.getLine(0)===""}});
