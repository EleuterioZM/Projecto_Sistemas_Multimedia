"use strict";function copyObj(t,e,n){e||(e={});for(var r in t)t.hasOwnProperty(r)&&(n!==!1||!e.hasOwnProperty(r))&&(e[r]=t[r]);return e}function countColumn(t,e,n,r,o){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));for(var i=r||0,s=o||0;;){var l=t.indexOf("	",i);if(l<0||l>=e)return s+(e-i);s+=l-i,s+=n-s%n,i=l+1}}function nothing(){}function createObj(t,e){var n;return Object.create?n=Object.create(t):(nothing.prototype=t,n=new nothing),e&&copyObj(e,n),n}var StringStream=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};StringStream.prototype.eol=function(){return this.pos>=this.string.length},StringStream.prototype.sol=function(){return this.pos==this.lineStart},StringStream.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},StringStream.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},StringStream.prototype.eat=function(t){var e=this.string.charAt(this.pos),n;if(typeof t=="string"?n=e==t:n=e&&(t.test?t.test(e):t(e)),n)return++this.pos,e},StringStream.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},StringStream.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},StringStream.prototype.skipToEnd=function(){this.pos=this.string.length},StringStream.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},StringStream.prototype.backUp=function(t){this.pos-=t},StringStream.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},StringStream.prototype.indentation=function(){return countColumn(this.string,null,this.tabSize)-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},StringStream.prototype.match=function(t,e,n){if(typeof t=="string"){var r=function(s){return n?s.toLowerCase():s},o=this.string.substr(this.pos,t.length);if(r(o)==r(t))return e!==!1&&(this.pos+=t.length),!0}else{var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&e!==!1&&(this.pos+=i[0].length),i)}},StringStream.prototype.current=function(){return this.string.slice(this.start,this.pos)},StringStream.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},StringStream.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},StringStream.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var modes={},mimeModes={};function defineMode(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),modes[t]=e}function defineMIME(t,e){mimeModes[t]=e}function resolveMode(t){if(typeof t=="string"&&mimeModes.hasOwnProperty(t))t=mimeModes[t];else if(t&&typeof t.name=="string"&&mimeModes.hasOwnProperty(t.name)){var e=mimeModes[t.name];typeof e=="string"&&(e={name:e}),t=createObj(e,t),t.name=e.name}else{if(typeof t=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return resolveMode("application/xml");if(typeof t=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return resolveMode("application/json")}return typeof t=="string"?{name:t}:t||{name:"null"}}function getMode(t,e){e=resolveMode(e);var n=modes[e.name];if(!n)return getMode(t,"text/plain");var r=n(t,e);if(modeExtensions.hasOwnProperty(e.name)){var o=modeExtensions[e.name];for(var i in o)o.hasOwnProperty(i)&&(r.hasOwnProperty(i)&&(r["_"+i]=r[i]),r[i]=o[i])}if(r.name=e.name,e.helperType&&(r.helperType=e.helperType),e.modeProps)for(var s in e.modeProps)r[s]=e.modeProps[s];return r}var modeExtensions={};function extendMode(t,e){var n=modeExtensions.hasOwnProperty(t)?modeExtensions[t]:modeExtensions[t]={};copyObj(e,n)}function copyState(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var n={};for(var r in e){var o=e[r];o instanceof Array&&(o=o.concat([])),n[r]=o}return n}function innerMode(t,e){for(var n;t.innerMode&&(n=t.innerMode(e),!(!n||n.mode==t));)e=n.state,t=n.mode;return n||{mode:t,state:e}}function startState(t,e,n){return t.startState?t.startState(e,n):!0}var modeMethods={__proto__:null,modes,mimeModes,defineMode,defineMIME,resolveMode,getMode,modeExtensions,extendMode,copyState,innerMode,startState};exports.StringStream=StringStream,exports.countColumn=countColumn;for(var exported in modeMethods)exports[exported]=modeMethods[exported];require.cache[require.resolve("../../lib/codemirror")]=require.cache[require.resolve("./runmode.node")],require.cache[require.resolve("../../addon/runmode/runmode")]=require.cache[require.resolve("./runmode.node")],exports.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),exports.defineMIME("text/plain","null"),exports.registerHelper=exports.registerGlobalHelper=Math.min,exports.splitLines=function(t){return t.split(/\r?\n|\r/)},exports.defaults={indentUnit:2},function(t){typeof exports=="object"&&typeof module=="object"?t(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){t.runMode=function(e,n,r,o){var i=t.getMode(t.defaults,n),s=o&&o.tabSize||t.defaults.tabSize;if(r.appendChild){var l=/MSIE \d/.test(navigator.userAgent),O=l&&(document.documentMode==null||document.documentMode<9),d=r,p=0;d.textContent="",r=function(a,g){if(a==`
`){d.appendChild(document.createTextNode(O?"\r":a)),p=0;return}for(var c="",h=0;;){var y=a.indexOf("	",h);if(y==-1){c+=a.slice(h),p+=a.length-h;break}else{p+=y-h,c+=a.slice(h,y);var S=s-p%s;p+=S;for(var M=0;M<S;++M)c+=" ";h=y+1}}if(g){var w=d.appendChild(document.createElement("span"));w.className="cm-"+g.replace(/ +/g," cm-"),w.appendChild(document.createTextNode(c))}else d.appendChild(document.createTextNode(c))}}for(var v=t.splitLines(e),m=o&&o.state||t.startState(i),f=0,b=v.length;f<b;++f){f&&r(`
`);var u=new t.StringStream(v[f],null,{lookAhead:function(a){return v[f+a]},baseToken:function(){}});for(!u.string&&i.blankLine&&i.blankLine(m);!u.eol();){var P=i.token(u,m);r(u.current(),P,f,u.start,m,i),u.start=u.pos}}}});
