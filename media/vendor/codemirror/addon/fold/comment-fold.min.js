(function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){"use strict";e.registerGlobalHelper("fold","comment",function(n){return n.blockCommentStart&&n.blockCommentEnd},function(n,o){var d=n.getModeAt(o),c=d.blockCommentStart,a=d.blockCommentEnd;if(!(!c||!a)){for(var i=o.line,k=n.getLine(i),m,b=o.ch,v=0;;){var t=b<=0?-1:k.lastIndexOf(c,b-1);if(t==-1){if(v==1)return;v=1,b=k.length;continue}if(v==1&&t<o.ch)return;if(/comment/.test(n.getTokenTypeAt(e.Pos(i,t+1)))&&(t==0||k.slice(t-a.length,t)==a||!/comment/.test(n.getTokenTypeAt(e.Pos(i,t))))){m=t+c.length;break}b=t-1}var y=1,s=n.lastLine(),g,u;e:for(var l=i;l<=s;++l)for(var f=n.getLine(l),r=l==i?m:0;;){var h=f.indexOf(c,r),T=f.indexOf(a,r);if(h<0&&(h=f.length),T<0&&(T=f.length),r=Math.min(h,T),r==f.length)break;if(r==h)++y;else if(!--y){g=l,u=r;break e}++r}if(!(g==null||i==g&&u==m))return{from:e.Pos(i,m),to:e.Pos(g,u)}}})});
