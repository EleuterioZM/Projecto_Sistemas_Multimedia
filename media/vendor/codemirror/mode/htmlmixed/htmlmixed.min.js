(function(i){typeof exports=="object"&&typeof module=="object"?i(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],i):i(CodeMirror)})(function(i){"use strict";var y={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function M(l,n,a){var c=l.current(),o=c.search(n);return o>-1?l.backUp(c.length-o):c.match(/<\/?$/)&&(l.backUp(c.length),l.match(n,!1)||l.match(c)),a}var m={};function j(l){var n=m[l];return n||(m[l]=new RegExp("\\s+"+l+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function k(l,n){var a=l.match(j(n));return a?/^\s*(.*?)\s*$/.exec(a[2])[1]:""}function v(l,n){return new RegExp((n?"^":"")+"</\\s*"+l+"\\s*>","i")}function p(l,n){for(var a in l)for(var c=n[a]||(n[a]=[]),o=l[a],r=o.length-1;r>=0;r--)c.unshift(o[r])}function b(l,n){for(var a=0;a<l.length;a++){var c=l[a];if(!c[0]||c[1].test(k(n,c[0])))return c[2]}}i.defineMode("htmlmixed",function(l,n){var a=i.getMode(l,{name:"xml",htmlMode:!0,multilineTagIndentFactor:n.multilineTagIndentFactor,multilineTagIndentPastTag:n.multilineTagIndentPastTag,allowMissingTagName:n.allowMissingTagName}),c={},o=n&&n.tags,r=n&&n.scriptTypes;if(p(y,c),o&&p(o,c),r)for(var s=r.length-1;s>=0;s--)c.script.unshift(["type",r[s].matches,r[s].mode]);function S(e,t){var u=a.token(e,t.htmlState),x=/\btag\b/.test(u),d;if(x&&!/[<>\s\/]/.test(e.current())&&(d=t.htmlState.tagName&&t.htmlState.tagName.toLowerCase())&&c.hasOwnProperty(d))t.inTag=d+" ";else if(t.inTag&&x&&/>$/.test(e.current())){var g=/^([\S]+) (.*)/.exec(t.inTag);t.inTag=null;var $=e.current()==">"&&b(c[g[1]],g[2]),T=i.getMode(l,$),w=v(g[1],!0),N=v(g[1],!1);t.token=function(h,f){return h.match(w,!1)?(f.token=S,f.localState=f.localMode=null,null):M(h,N,f.localMode.token(h,f.localState))},t.localMode=T,t.localState=i.startState(T,a.indent(t.htmlState,"",""))}else t.inTag&&(t.inTag+=e.current(),e.eol()&&(t.inTag+=" "));return u}return{startState:function(){var e=i.startState(a);return{token:S,inTag:null,localMode:null,localState:null,htmlState:e}},copyState:function(e){var t;return e.localState&&(t=i.copyState(e.localMode,e.localState)),{token:e.token,inTag:e.inTag,localMode:e.localMode,localState:t,htmlState:i.copyState(a,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,t,u){return!e.localMode||/^\s*<\//.test(t)?a.indent(e.htmlState,t,u):e.localMode.indent?e.localMode.indent(e.localState,t,u):i.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||a}}}},"xml","javascript","css"),i.defineMIME("text/html","htmlmixed")});
