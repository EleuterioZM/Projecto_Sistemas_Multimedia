(function(t){typeof exports=="object"&&typeof module=="object"?t(require("../../lib/codemirror"),require("../yaml/yaml")):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../yaml/yaml"],t):t(CodeMirror)})(function(t){var u=0,o=1,m=2;t.defineMode("yaml-frontmatter",function(y,c){var l=t.getMode(y,"yaml"),a=t.getMode(y,c&&c.base||"gfm");function f(e){return e.state==o?{mode:l,state:e.yaml}:{mode:a,state:e.inner}}return{startState:function(){return{state:u,yaml:null,inner:t.startState(a)}},copyState:function(e){return{state:e.state,yaml:e.yaml&&t.copyState(l,e.yaml),inner:t.copyState(a,e.inner)}},token:function(e,n){if(n.state==u)return e.match("---",!1)?(n.state=o,n.yaml=t.startState(l),l.token(e,n.yaml)):(n.state=m,a.token(e,n.inner));if(n.state==o){var r=e.sol()&&e.match(/(---|\.\.\.)/,!1),i=l.token(e,n.yaml);return r&&(n.state=m,n.yaml=null),i}else return a.token(e,n.inner)},innerMode:f,indent:function(e,n,r){var i=f(e);return i.mode.indent?i.mode.indent(i.state,n,r):t.Pass},blankLine:function(e){var n=f(e);if(n.mode.blankLine)return n.mode.blankLine(n.state)}}})});
