(function(t){typeof exports=="object"&&typeof module=="object"?t(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("dtd",function(k){var d=k.indentUnit,l;function u(i,e){return l=e,i}function c(i,e){var n=i.next();if(n=="<"&&i.eat("!")){if(i.eatWhile(/[\-]/))return e.tokenize=f,f(i,e);if(i.eatWhile(/[\w]/))return u("keyword","doindent")}else{if(n=="<"&&i.eat("?"))return e.tokenize=h("meta","?>"),u("meta",n);if(n=="#"&&i.eatWhile(/[\w]/))return u("atom","tag");if(n=="|")return u("keyword","separator");if(n.match(/[\(\)\[\]\-\.,\+\?>]/))return u(null,n);if(n.match(/[\[\]]/))return u("rule",n);if(n=='"'||n=="'")return e.tokenize=a(n),e.tokenize(i,e);if(i.eatWhile(/[a-zA-Z\?\+\d]/)){var r=i.current();return r.substr(r.length-1,r.length).match(/\?|\+/)!==null&&i.backUp(1),u("tag","tag")}else return n=="%"||n=="*"?u("number","number"):(i.eatWhile(/[\w\\\-_%.{,]/),u(null,null))}}function f(i,e){for(var n=0,r;(r=i.next())!=null;){if(n>=2&&r==">"){e.tokenize=c;break}n=r=="-"?n+1:0}return u("comment","comment")}function a(i){return function(e,n){for(var r=!1,o;(o=e.next())!=null;){if(o==i&&!r){n.tokenize=c;break}r=!r&&o=="\\"}return u("string","tag")}}function h(i,e){return function(n,r){for(;!n.eol();){if(n.match(e)){r.tokenize=c;break}n.next()}return i}}return{startState:function(i){return{tokenize:c,baseIndent:i||0,stack:[]}},token:function(i,e){if(i.eatSpace())return null;var n=e.tokenize(i,e),r=e.stack[e.stack.length-1];return i.current()=="["||l==="doindent"||l=="["?e.stack.push("rule"):l==="endtag"?e.stack[e.stack.length-1]="endtag":i.current()=="]"||l=="]"||l==">"&&r=="rule"?e.stack.pop():l=="["&&e.stack.push("["),n},indent:function(i,e){var n=i.stack.length;return e.charAt(0)==="]"?n--:e.substr(e.length-1,e.length)===">"&&(e.substr(0,1)==="<"||l=="doindent"&&e.length>1||(l=="doindent"?n--:l==">"&&e.length>1||l=="tag"&&e!==">"||(l=="tag"&&i.stack[i.stack.length-1]=="rule"?n--:l=="tag"?n++:e===">"&&i.stack[i.stack.length-1]=="rule"&&l===">"?n--:e===">"&&i.stack[i.stack.length-1]=="rule"||(e.substr(0,1)!=="<"&&e.substr(0,1)===">"?n=n-1:e===">"||(n=n-1)))),(l==null||l=="]")&&n--),i.baseIndent+n*d},electricChars:"]>"}}),t.defineMIME("application/xml-dtd","dtd")});
