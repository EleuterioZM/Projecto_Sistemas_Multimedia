/**
 * @copyright  (C) 2018 Open Source Matters, Inc. <https://www.joomla.org>
 * @license    GNU General Public License version 2 or later; see LICENSE.txt
 */((l,r,f,n)=>{if(!r)throw new Error("core.js was not properly initialised");const c=({target:t})=>{t.value.length>1&&(t.awesomplete.list=[],r.request({url:`${r.getOptions("finder-search").url}&q=${t.value}`,promise:!0}).then(s=>{let e;try{e=JSON.parse(s.responseText)}catch(o){console.error(o);return}Object.prototype.toString.call(e.suggestions)==="[object Array]"&&(t.awesomplete.list=e.suggestions)}).catch(s=>{console.error(s)}))},a=t=>{t.stopPropagation();const s=t.target.querySelector(".js-finder-advanced");s&&[].slice.call(s.querySelectorAll("select")).forEach(o=>{o.value||o.setAttribute("disabled","disabled")})},d=t=>{const s=t.target.closest("form");s&&s.submit()},i=()=>{[].slice.call(n.querySelectorAll(".js-finder-search-query")).forEach(e=>{r.getOptions("finder-search")&&(e.awesomplete=new l(e),e.addEventListener("input",c),e.closest("form").querySelector(".js-finder-advanced")||e.addEventListener("awesomplete-selectcomplete",d))}),[].slice.call(n.querySelectorAll(".js-finder-searchform")).forEach(e=>{e.addEventListener("submit",a)}),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i)})(window.Awesomplete,window.Joomla,window,document);
