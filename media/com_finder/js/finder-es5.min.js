(function(){"use strict";/**
 * @copyright  (C) 2018 Open Source Matters, Inc. <https://www.joomla.org>
 * @license    GNU General Public License version 2 or later; see LICENSE.txt
 */(function(a,o,v,i){if(!o)throw new Error("core.js was not properly initialised");var c=function(r){var t=r.target;t.value.length>1&&(t.awesomplete.list=[],o.request({url:o.getOptions("finder-search").url+"&q="+t.value,promise:!0}).then(function(e){var n;try{n=JSON.parse(e.responseText)}catch(d){console.error(d);return}Object.prototype.toString.call(n.suggestions)==="[object Array]"&&(t.awesomplete.list=n.suggestions)}).catch(function(e){console.error(e)}))},l=function(r){r.stopPropagation();var t=r.target.querySelector(".js-finder-advanced");if(t){var e=[].slice.call(t.querySelectorAll("select"));e.forEach(function(n){n.value||n.setAttribute("disabled","disabled")})}},u=function(r){var t=r.target.closest("form");t&&t.submit()},f=function s(){var r=[].slice.call(i.querySelectorAll(".js-finder-search-query"));r.forEach(function(e){if(o.getOptions("finder-search")){e.awesomplete=new a(e),e.addEventListener("input",c);var n=e.closest("form").querySelector(".js-finder-advanced");n||e.addEventListener("awesomplete-selectcomplete",u)}});var t=[].slice.call(i.querySelectorAll(".js-finder-searchform"));t.forEach(function(e){e.addEventListener("submit",l)}),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",f)})(window.Awesomplete,window.Joomla,window,document)})();
