/**
 * @copyright  (C) 2018 Open Source Matters, Inc. <https://www.joomla.org>
 * @license    GNU General Public License version 2 or later; see LICENSE.txt
 */(e=>{e.submitbutton=(t,r)=>{t==="item.setType"||t==="item.setMenuType"?(t==="item.setType"?([].slice.call(document.querySelectorAll('#item-form input[name="jform[type]"]')).forEach(n=>{n.value=r}),document.getElementById("fieldtype").value="type"):[].slice.call(document.querySelectorAll('#item-form input[name="jform[menutype]"]')).forEach(n=>{n.value=r}),e.submitform("item.setType",document.getElementById("item-form"))):t==="item.cancel"||document.formvalidator.isValid(document.getElementById("item-form"))?e.submitform(t,document.getElementById("item-form")):[].slice.call(document.querySelectorAll("#item-form .modal-value.invalid")).forEach(n=>{const o=n.getAttribute("id").split("").reverse().join(""),s=o.indexOf("_"),c=`${o.substr(s).split("").reverse().join("")}name`;document.getElementById(c).classList.add("invalid")})};const d=({target:t})=>{const r=t.value;e.request({url:`index.php?option=com_menus&task=item.getParentItem&menutype=${r}`,headers:{"Content-Type":"application/json"},onSuccess(i){const n=JSON.parse(i),o=document.getElementById("jform_parent_id").closest("joomla-field-fancy-select");o.choicesInstance.clearChoices(),o.choicesInstance.setChoices([{id:"1",text:e.Text._("JGLOBAL_ROOT_PARENT")}],"id","text",!1),n.forEach(c=>{const m={};m.innerText=c.title,m.id=c.id,o.choicesInstance.setChoices([m],"id","innerText",!1)}),o.choicesInstance.setChoiceByValue("1");const s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!1),document.getElementById("jform_parent_id").dispatchEvent(s)},onError:i=>{e.renderMessages(e.ajaxErrorsMessages(i))}})};if(!e||typeof e.request!="function")throw new Error("core.js was not properly initialised");const l=document.getElementById("jform_menutype");l&&l.addEventListener("change",d),document.getElementById("item-form").addEventListener("submit",()=>{document.getElementById("jform_params_login_redirect_url")&&document.getElementById("jform_params_logout_redirect_url")&&(document.getElementById("jform_params_login_redirect_url").closest(".control-group").classList.contains("hidden")||(document.getElementById("jform_params_login_redirect_menuitem_id").value=""),document.getElementById("jform_params_login_redirect_menuitem_name").closest(".control-group").classList.contains("hidden")||(document.getElementById("jform_params_login_redirect_url").value=""),document.getElementById("jform_params_logout_redirect_url").closest(".control-group").classList.contains("hidden")||(document.getElementById("jform_params_logout_redirect_menuitem_id").value=""),document.getElementById("jform_params_logout_redirect_menuitem_id").closest(".control-group").classList.contains("hidden")||(document.getElementById("jform_params_logout_redirect_url").value=""))})})(Joomla);
