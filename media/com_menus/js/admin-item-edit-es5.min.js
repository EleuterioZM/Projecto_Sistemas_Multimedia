(function(){"use strict";/**
 * @copyright  (C) 2018 Open Source Matters, Inc. <https://www.joomla.org>
 * @license    GNU General Public License version 2 or later; see LICENSE.txt
 */(function(e){e.submitbutton=function(n,o){if(n==="item.setType"||n==="item.setMenuType"){if(n==="item.setType"){var m=[].slice.call(document.querySelectorAll('#item-form input[name="jform[type]"]'));m.forEach(function(t){t.value=o}),document.getElementById("fieldtype").value="type"}else{var s=[].slice.call(document.querySelectorAll('#item-form input[name="jform[menutype]"]'));s.forEach(function(t){t.value=o})}e.submitform("item.setType",document.getElementById("item-form"))}else if(n==="item.cancel"||document.formvalidator.isValid(document.getElementById("item-form")))e.submitform(n,document.getElementById("item-form"));else{var a=[].slice.call(document.querySelectorAll("#item-form .modal-value.invalid"));a.forEach(function(t){var i=t.getAttribute("id").split("").reverse().join(""),r=i.indexOf("_"),c=i.substr(r).split("").reverse().join("")+"name";document.getElementById(c).classList.add("invalid")})}};var f=function(o){var m=o.target,s=m.value;e.request({url:"index.php?option=com_menus&task=item.getParentItem&menutype="+s,headers:{"Content-Type":"application/json"},onSuccess:function(t){var i=JSON.parse(t),r=document.getElementById("jform_parent_id").closest("joomla-field-fancy-select");r.choicesInstance.clearChoices(),r.choicesInstance.setChoices([{id:"1",text:e.Text._("JGLOBAL_ROOT_PARENT")}],"id","text",!1),i.forEach(function(u){var d={};d.innerText=u.title,d.id=u.id,r.choicesInstance.setChoices([d],"id","innerText",!1)}),r.choicesInstance.setChoiceByValue("1");var c=document.createEvent("HTMLEvents");c.initEvent("change",!0,!1),document.getElementById("jform_parent_id").dispatchEvent(c)},onError:function(t){e.renderMessages(e.ajaxErrorsMessages(t))}})};if(!e||typeof e.request!="function")throw new Error("core.js was not properly initialised");var l=document.getElementById("jform_menutype");l&&l.addEventListener("change",f),document.getElementById("item-form").addEventListener("submit",function(){document.getElementById("jform_params_login_redirect_url")&&document.getElementById("jform_params_logout_redirect_url")&&(document.getElementById("jform_params_login_redirect_url").closest(".control-group").classList.contains("hidden")||(document.getElementById("jform_params_login_redirect_menuitem_id").value=""),document.getElementById("jform_params_login_redirect_menuitem_name").closest(".control-group").classList.contains("hidden")||(document.getElementById("jform_params_login_redirect_url").value=""),document.getElementById("jform_params_logout_redirect_url").closest(".control-group").classList.contains("hidden")||(document.getElementById("jform_params_logout_redirect_menuitem_id").value=""),document.getElementById("jform_params_logout_redirect_menuitem_id").closest(".control-group").classList.contains("hidden")||(document.getElementById("jform_params_logout_redirect_url").value=""))})})(Joomla)})();
