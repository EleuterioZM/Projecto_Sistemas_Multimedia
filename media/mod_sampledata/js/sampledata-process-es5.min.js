(function(){"use strict";/**
 * @copyright  (C) 2018 Open Source Matters, Inc. <https://www.joomla.org>
 * @license    GNU General Public License version 2 or later; see LICENSE.txt
 */var t={inProgress:!1},S=function i(e,r,a){var u="index.php?option=com_ajax&format=json&group=sampledata&"+Joomla.getOptions("csrf.token")+"=1",p=Joomla.getOptions("sample-data"),s=document.createElement("div");s.classList.add("sampledata-steps-"+e+"-"+a),s.setAttribute("role","region"),s.setAttribute("aria-live","polite");var d=document.createElement("p");d.classList.add("loader-image"),d.classList.add("text-center");var c=document.createElement("img");c.setAttribute("src",p.icon),c.setAttribute("width",30),c.setAttribute("height",30),d.appendChild(c),s.appendChild(d),document.querySelector(".sampledata-progress-"+e).appendChild(s),Joomla.request({url:u+"&type="+e+"&plugin=SampledataApplyStep"+a+"&step="+a,method:"GET",perform:!0,onSuccess:function(T){var g=s.querySelector(".loader-image");g.parentNode.removeChild(g);var l={};try{l=JSON.parse(T)}catch{Joomla.renderMessages({error:[Joomla.Text._("MOD_SAMPLEDATA_INVALID_RESPONSE")]},".sampledata-steps-"+e+"-"+a),t.inProgress=!1;return}var f="",m;if(l.success&&l.data&&l.data.length>0){var o=document.querySelector(".sampledata-progress-"+e+" .progress-bar");if(l.data.forEach(function(n){n!==null&&(m=n.success,f=m?"bg-success":"bg-danger",m?Joomla.renderMessages({message:[n.message]},".sampledata-steps-"+e+"-"+a,!1,3e3):Joomla.renderMessages({error:[n.message]},".sampledata-steps-"+e+"-"+a,!1))}),o.innerText=a+"/"+r,o.style.width=a/r*100+"%",o.setAttribute("aria-valuemin",0),o.setAttribute("aria-valuemax",100),o.setAttribute("aria-valuenow",a/r*100),o.classList.add(f),m&&a<=r){var E=a+1;if(E<=r)i(e,r,E);else{var v=document.querySelector(".sampledata-progress-"+e);v.parentNode.removeChild(v),Joomla.renderMessages({message:[Joomla.Text._("MOD_SAMPLEDATA_COMPLETED")]}),window.scroll({top:0,left:0,behavior:"smooth"}),t.inProgress=!1}}}else Joomla.renderMessages({error:[Joomla.Text._("MOD_SAMPLEDATA_INVALID_RESPONSE")]}),window.scroll({top:0,left:0,behavior:"smooth"}),t.inProgress=!1},onError:function(){Joomla.renderMessages({error:[Joomla.Text._("MOD_SAMPLEDATA_ERROR_RESPONSE")]}),window.scroll({top:0,left:0,behavior:"smooth"}),t.inProgress=!1}})},_=function(e){var r=e.getAttribute("data-type"),a=e.getAttribute("data-steps");if(!t.inProgress){if(e.getAttribute("data-processed")){alert(Joomla.Text._("MOD_SAMPLEDATA_ITEM_ALREADY_PROCESSED")),t.inProgress=!1;return}if(!window.confirm(Joomla.Text._("MOD_SAMPLEDATA_CONFIRM_START")))return!1;var u=[].slice.call(document.querySelectorAll(".sampledata-progress-"+r));return u.forEach(function(p){p.classList.remove("d-none")}),e.setAttribute("data-processed",!0),t.inProgress=!0,S(r,a,1),!1}},A=document.getElementById("sample-data-wrapper");if(A){var h=[].slice.call(A.querySelectorAll(".apply-sample-data"));h.forEach(function(i){i.addEventListener("click",function(e){var r=e.currentTarget;return _(r)})})}})();
