(function(){"use strict";/**
 * @copyright  (C) 2018 Open Source Matters, Inc. <https://www.joomla.org>
 * @license    GNU General Public License version 2 or later; see LICENSE.txt
 */var a,s=!1,o=function(e,t,n){var i=document.createElement("canvas");i.width=e,i.height=t,i.getContext("2d").drawImage(n,0,0,e,t);var c=Joomla.MediaManager.Edit.original.extension==="jpg"?"jpeg":Joomla.MediaManager.Edit.original.extension,l=a.resizeQuality.value;Joomla.MediaManager.Edit.current.contents=i.toDataURL("image/"+c,l),n.width=e,n.height=t,n.src=Joomla.MediaManager.Edit.current.contents,a.resizeWidth.value=parseInt(e,10),a.resizeHeight.value=parseInt(t,10),window.dispatchEvent(new Event("mediaManager.history.point")),i=null},d=function(e){a.resizeWidth.addEventListener("change",function(t){var n=t.target;o(parseInt(n.value,10),parseInt(n.value,10)/(e.width/e.height),e)}),a.resizeHeight.addEventListener("change",function(t){var n=t.target;o(parseInt(n.value,10)*(e.width/e.height),parseInt(n.value,10),e)})},u=function(e){a.resizeWidth.value=e.naturalWidth,a.resizeHeight.value=e.naturalHeight,s||(s=!0,d(e))};window.addEventListener("media-manager-edit-init",function(){a={resizeWidth:document.getElementById("jform_resize_width"),resizeHeight:document.getElementById("jform_resize_height"),resizeQuality:document.getElementById("jform_resize_quality")},Joomla.MediaManager.Edit.plugins.resize={Activate:function(e){return new Promise(function(t){u(e),t()})},Deactivate:function(){return new Promise(function(e){e()})}}},{once:!0})})();
