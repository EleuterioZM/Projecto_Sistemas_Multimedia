(function(){"use strict";(function(s,r){if(!r)throw new Error("Joomla API is not properly initialised");r.addShortcut=function(i,t){hotkeys(i,"joomla",function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.call()})},r.addClickShortcut=function(i,t){r.addShortcut(i,function(){var e=s.querySelector(t);e&&e.click()})},r.addFocusShortcut=function(i,t){r.addShortcut(i,function(){var e=s.querySelector(t);e&&e.focus()})},r.addLinkShortcut=function(i,t){r.addShortcut(i,function(){window.location.href=t})};var d=function(){hotkeys.filter=function(t){var e=t.target||t.srcElement,o=e.tagName;return e.type==="checkbox"?!0:!(e.isContentEditable||o==="INPUT"||o==="SELECT"||o==="TEXTAREA")}},l=function(){hotkeys("J",function(t){hotkeys.getScope()!=="joomla"&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),hotkeys.setScope("joomla"),setTimeout(function(){hotkeys.setScope(!1)},r.getOptions("plg_system_shortcut.timeout",2e3)))})},u=function(){var t=s.querySelector(".com_cpanel .container-main");if(t){var e=s.createElement("section");e.className="content pt-4",e.insertAdjacentHTML("beforeend",r.Text._("PLG_SYSTEM_SHORTCUT_OVERVIEW_HINT")),t.appendChild(e)}},h=function(t){var e=new Map;Object.values(t).forEach(function(n){if(!(!n.shortcut||!n.title)){var c=[];e.has(n.shortcut)?(c=e.get(n.shortcut),c.push(n.title)):c=[n.title],e.set(n.shortcut,c)}});var o="<dl>";e.forEach(function(n,c){o+="<div>",o+='<dt class="d-inline-block"><kbd>J</kbd>',c.split("+").forEach(function(a){o+=" "+r.Text._("PLG_SYSTEM_SHORTCUT_THEN")+" <kbd>"+a.trim()+"</kbd>"}),o+="</dt>",n.forEach(function(a){o+='<dd class="d-inline-block ms-1">'+a+"</dd>"}),o+="</div>"}),o+="</dl>";var f=`
      <div class="modal fade" id="shortcutOverviewModal" tabindex="-1" role="dialog" data-bs-backdrop="static" aria-labelledby="shortcutOverviewModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h3 id="shortcutOverviewModalLabel" class="modal-title">
                `+r.Text._("PLG_SYSTEM_SHORTCUT_OVERVIEW_TITLE")+`
              </h3>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="`+r.Text._("JCLOSE")+`"></button>
            </div>
            <div class="modal-body p-3">
              <p>`+r.Text._("PLG_SYSTEM_SHORTCUT_OVERVIEW_DESC")+`</p>
              <div class="mb-3">
                `+o+`
              </div>
            </div>
          </div>
        </div>
      </div>
    `;s.body.insertAdjacentHTML("beforeend",f);var p=new bootstrap.Modal(s.getElementById("shortcutOverviewModal"),{keyboard:!0,backdrop:!0});hotkeys("X","joomla",function(){return p.show()})};s.addEventListener("DOMContentLoaded",function(){var i=r.getOptions("plg_system_shortcut.shortcuts");Object.values(i).forEach(function(t){!t.shortcut||!t.selector||(t.selector.startsWith("/")||t.selector.startsWith("http://")||t.selector.startsWith("www.")?r.addLinkShortcut(t.shortcut,t.selector):t.selector.includes("input")?r.addFocusShortcut(t.shortcut,t.selector):r.addClickShortcut(t.shortcut,t.selector))}),s.querySelector("nav")&&(h(i),u()),d(),l()})})(document,Joomla)})();
