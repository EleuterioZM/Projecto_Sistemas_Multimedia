/**
 * @copyright  (C) 2018 Open Source Matters, Inc. <https://www.joomla.org>
 * @license    GNU General Public License version 2 or later; see LICENSE.txt
 * @since      3.5.0
 */Joomla=window.Joomla||{},((r,e)=>{const i={input:["type","name","value"],"joomla-alert":["type","dismiss","role"],button:["type"],table:[],tbody:[],thead:[],caption:[],th:["scope"],tr:[],td:[]},c=a=>{const o=e.getElementById("system-message-container"),s=o.querySelector(".js-pstats-alert"),n=o.querySelector("#js-pstats-data-details");e.addEventListener("click",t=>{t.target.classList.contains("js-pstats-btn-details")&&(t.preventDefault(),n.classList.toggle("d-none"))}),e.addEventListener("click",t=>{t.target.classList.contains("js-pstats-btn-allow-always")&&(t.preventDefault(),s.close(),a({plugin:"sendAlways"}))}),e.addEventListener("click",t=>{t.target.classList.contains("js-pstats-btn-allow-never")&&(t.preventDefault(),s.close(),a({plugin:"sendNever"}))})},l=({plugin:a="sendStats"}={})=>{const o=`index.php?option=com_ajax&group=system&plugin=${a}&format=raw`,s=e.getElementById("system-message-container");r.request({url:o,headers:{"Content-Type":"application/json"},onSuccess:n=>{try{const t=JSON.parse(n);t&&t.html&&(s.insertAdjacentHTML("beforeend",r.sanitizeHtml(t.html,i)),s.querySelector(".js-pstats-alert").classList.remove("hidden"),c(l))}catch(t){throw new Error(t)}},onError:n=>{r.renderMessages({error:[n.response]})}})};e.addEventListener("DOMContentLoaded",()=>{l()})})(Joomla,document);
