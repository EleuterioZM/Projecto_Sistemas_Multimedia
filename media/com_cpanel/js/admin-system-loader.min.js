/**
 * @copyright  (C) 2019 Open Source Matters, Inc. <https://www.joomla.org>
 * @license    GNU General Public License version 2 or later; see LICENSE.txt
 */((r,t)=>{const a=()=>{window.removeEventListener("load",a);const c=[].slice.call(r.querySelectorAll(".system-counter"));c.length&&c.forEach(s=>{const o=s.getAttribute("data-url");o&&t&&t.request&&typeof t.request=="function"&&t.enqueueRequest({url:o,method:"POST",promise:!0}).then(d=>{const n=d.responseText;let i;try{i=JSON.parse(n)}catch{throw new Error("Failed to parse JSON")}if(i.error||!i.success)s.classList.remove("icon-spin"),s.classList.remove("icon-spinner"),s.classList.add("text-danger"),s.classList.add("icon-remove");else if(i.data){const e=r.createElement("span");e.classList.add("float-end"),e.classList.add("badge"),e.classList.add("bg-warning","text-dark"),e.innerHTML=t.sanitizeHtml(i.data),s.parentNode.replaceChild(e,s)}else s.classList.remove("icon-spin"),s.classList.remove("icon-spinner"),s.classList.add("icon-check"),s.classList.add("text-success")}).catch(()=>{s.classList.remove("icon-spin"),s.classList.remove("icon-spinner"),s.classList.add("text-danger"),s.classList.add("icon-remove")})})};window.addEventListener("load",()=>{setTimeout(a,300)})})(document,Joomla);
