window.tinymce.PluginManager.add("highlightPlus",(e,n)=>{const o=()=>{e.focus(),e.selection.collapse(!0),e.settings.codemirror||(e.settings.codemirror={}),e.settings.codemirror&&e.settings.codemirror.saveCursorPosition&&e.selection.setContent('<span style="display: none;" class="CmCaReT">&#x0;</span>');let t=800;e.settings.codemirror.width&&(t=e.settings.codemirror.width);let r=550;e.settings.codemirror.height&&(r=e.settings.codemirror.height);const s=[{type:"custom",text:"Ok",name:"codemirrorOk",primary:!0},{type:"cancel",text:"Cancel",name:"codemirrorCancel"}],i={title:"Source code",url:`${n}/source.html`,width:t,height:r,resizable:!0,maximizable:!0,fullScreen:e.settings.codemirror.fullscreen,saveCursorPosition:!1,buttons:s};i.onAction=(u,l)=>{l.name==="codemirrorOk"&&(document.querySelectorAll(".tox-dialog__body-iframe iframe")[0].contentWindow.tinymceHighlighterSubmit(),e.undoManager.add(),c.close())};const c=e.windowManager.openUrl(i);e.settings.codemirror.fullscreen&&c.fullscreen(!0)};e.ui.registry.addButton("code",{icon:"sourcecode",title:"Source code+",tooltip:"Source code+",onAction:o}),e.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code+",onAction:o,context:"tools"})});
