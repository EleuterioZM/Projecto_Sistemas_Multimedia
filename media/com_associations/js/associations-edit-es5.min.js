(function(){"use strict";/**
 * @copyright   (C) 2018 Open Source Matters, Inc. <https://www.joomla.org>
 * @license     GNU General Public License version 2 or later; see LICENSE.txt
 */Joomla=window.Joomla||{},function(e,n){e.hideAssociation=function(s,t){var i=[].slice.call(n.querySelectorAll("#associations .control-group"));i.forEach(function(a){var c=a.querySelector(".control-label label");if(c){var r=c.getAttribute("for");r.replace(/_name$/,"")===s+"_associations_"+t.replace("-","_")&&a.classList.add("hidden")}})},e.showAssociationMessage=function(){var s=[].slice.call(n.querySelectorAll("#associations .control-group")),t=n.getElementById("associations");if(t){var i=n.createElement("joomla-alert");i.innerText=e.Text._("JGLOBAL_ASSOC_NOT_POSSIBLE"),t.insertAdjacentElement("afterbegin",i)}s.forEach(function(a){a.classList.add("hidden")})},e.injectAssociations=function(s,t){var i;s.success?(s.data.length!==0&&[].slice.call(Object.keys(s.data)).forEach(function(a){i=t+a.replace("-","_"),window[i](s.data[a].id,s.data[a].title,s.data[a].catid,null,null,a)}),s.message&&e.renderMessages({notice:[s.message]})):e.renderMessages({warning:[e.Text._("JGLOBAL_ASSOCIATIONS_PROPAGATE_FAILED")]})},e.propagateAssociation=function(s,t){var i=n.getElementById(s+"_id").value,a=n.getElementById("jform_language"),c=a.options[a.selectedIndex].value,r={task:"ajax.fetchAssociations",format:"json",assocId:i,excludeLang:c};r[e.getOptions("csrf.token","")]=1;var g=Object.keys(r).reduce(function(o,l){return o.push(l+"="+encodeURIComponent(r[l])),o},[]).join("&"),d=n.forms.adminForm.action+"&"+g;return e.request({url:d,method:"GET",data:JSON.stringify(r),headers:{"Content-Type":"application/json"},onSuccess:function(l){e.injectAssociations(JSON.parse(l),t)},onError:function(){e.renderMessages({warning:[e.Text._("JGLOBAL_ASSOCIATIONS_PROPAGATE_FAILED")]})}}),!1},n.addEventListener("DOMContentLoaded",function(){var s=e.getOptions("system.associations.edit"),t=s.formControl||"jform",i=n.getElementById(t+"_language");parseInt(s.hidden,10)===1?e.showAssociationMessage():i&&e.hideAssociation(t,i.value),i&&i.addEventListener("change",function(a){var c=a.target;e.removeMessages();var r=!1,g=[].slice.call(n.querySelectorAll("#associations .control-group"));g.forEach(function(o){var l=o.querySelector(".control-label label").getAttribute("for"),u=l.replace("_name","").replace("jform_associations_","");o.classList.remove("hidden"),!r&&n.getElementById(t+"_associations_"+u+"_id").value!==""&&(r=!0);var f=n.getElementById(t+"_associations_"+u+"_clear");f.onclick?f.onclick():f.click&&f.click()}),r&&e.renderMessages({warning:[e.Text._("JGLOBAL_ASSOCIATIONS_RESET_WARNING")]});var d=c.value;d==="*"?e.showAssociationMessage():e.hideAssociation(t,d)})})}(Joomla,document)})();
