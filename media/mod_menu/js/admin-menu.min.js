/**
 * @copyright  (C) 2019 Open Source Matters, Inc. <https://www.joomla.org>
 * @license    GNU General Public License version 2 or later; see LICENSE.txt
 */const allMenus=document.querySelectorAll("ul.main-nav");allMenus.forEach(o=>{new MetisMenu(o)});const wrapper=document.getElementById("wrapper"),sidebar=document.getElementById("sidebar-wrapper"),menuToggleIcon=document.getElementById("menu-collapse-icon");if(sidebar||wrapper.classList.remove("closed"),sidebar&&!sidebar.getAttribute("data-hidden")){const o=document.getElementById("menu-collapse");[].slice.call(sidebar.querySelectorAll(".collapse-level-1")).forEach(e=>{[].slice.call(e.querySelectorAll(".collapse-level-1")).forEach(l=>{l&&(l.classList.remove("collapse-level-1"),l.classList.add("collapse-level-2"))})}),o.addEventListener("click",e=>{e.preventDefault(),wrapper.classList.toggle("closed"),menuToggleIcon.classList.toggle("icon-toggle-on"),menuToggleIcon.classList.toggle("icon-toggle-off"),[].slice.call(document.querySelectorAll(".main-nav > li")).forEach(c=>{c.classList.remove("open")});const l=document.querySelector(".child-open");l&&l.classList.remove("child-open"),window.dispatchEvent(new CustomEvent("joomla:menu-toggle",{detail:wrapper.classList.contains("closed")?"closed":"open",bubbles:!0,cancelable:!0}))});const i=wrapper.querySelectorAll("a.no-dropdown, a.collapse-arrow, .menu-dashboard > a"),a=window.location.href,t=document.querySelector("ul.main-nav"),r=[].slice.call(t.querySelectorAll("li.parent > a")),d=[].slice.call(t.querySelectorAll("li.parent .close"));i.forEach(e=>{if((!e.href.match(/index\.php$/)&&a.indexOf(e.href)===0||e.href.match(/index\.php$/)&&a.match(/index\.php$/))&&(e.setAttribute("aria-current","page"),e.classList.add("mm-active"),!e.parentNode.classList.contains("parent"))){const s=e.closest(".collapse-level-1"),l=e.closest(".collapse-level-2");s&&s.parentNode.classList.add("mm-active"),s&&s.classList.add("mm-show"),l&&l.parentNode.classList.add("mm-active"),l&&l.classList.add("mm-show")}});const n=({currentTarget:e})=>{let s=e.parentNode;s.tagName.toLowerCase()==="span"&&(s=e.parentNode.parentNode),s.classList.contains("open")?(t.classList.remove("child-open"),s.classList.remove("open")):([].slice.call(s.parentNode.children).forEach(c=>{c.classList.remove("open")}),wrapper.classList.remove("closed"),menuToggleIcon.classList.contains("icon-toggle-off")&&(menuToggleIcon.classList.toggle("icon-toggle-off"),menuToggleIcon.classList.toggle("icon-toggle-on")),t.classList.add("child-open"),s.parentNode.classList.contains("main-nav")&&s.classList.add("open")),window.dispatchEvent(new CustomEvent("joomla:menu-toggle",{detail:"open",bubbles:!0,cancelable:!0}))};r.forEach(e=>{e.addEventListener("click",n),e.addEventListener("keyup",n)}),d.forEach(e=>{e.addEventListener("click",()=>{[].slice.call(t.querySelectorAll(".open")).forEach(l=>{l.classList.remove("open")}),t.classList.remove("child-open")})})}
